var f=Object.defineProperty;var _=(r,s,e)=>s in r?f(r,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[s]=e;var d=(r,s,e)=>(_(r,typeof s!="symbol"?s+"":s,e),e);import{a as E,s as y}from"./filters-accordion-adfd64e7.js";import{s as w}from"./card-dcddfdb7.js";import{_ as l}from"./iframe-bd6a88bf.js";import{a as L,f as S}from"./utils-8fe55ea7.js";import"../sb-preview/runtime.js";const v=["Show all sections","Hide all sections"];class x extends HTMLDivElement{constructor(){super();d(this,"buttonId");d(this,"sectionId");d(this,"isAllOpen",()=>this.querySelectorAll('.accordion-title[aria-expanded="false"]').length===0);const e=crypto.randomUUID();this.buttonId=`btn-${e}`,this.sectionId=`pnl-${e}`}connectedCallback(){setTimeout(()=>this.setup())}setupPanels(){this.querySelectorAll(".accordion-panel").forEach((e,t)=>{e.setAttribute("role","region"),e.setAttribute("aria-labelledby",this.buttonId+`-${t}`),e.id=this.sectionId+`-${t}`})}setupButtons(){this.querySelectorAll(".accordion-title").forEach((e,t)=>{e.setAttribute("role","button"),e.id=this.buttonId+`-${t}`,e.setAttribute("aria-expanded",String(e.getAttribute("aria-expanded")==="true"||!1)),e.setAttribute("aria-controls",this.sectionId+`-${t}`),e.appendChild(this.createIcon()),e.addEventListener("click",()=>{e.setAttribute("aria-expanded",String(e.getAttribute("aria-expanded")!=="true")),this.isAllOpen()&&this.setShowAllState(!0)})})}setShowAllState(e){const t=this.querySelector(".show-all");t&&(t.setAttribute("aria-expanded",String(e)),t.childNodes[0].nodeValue=e?v[1]:v[0])}createIcon(){const e=document.createElement("gov-icon");return e.setAttribute("key","arrow-down"),e.setAttribute("role","presentation"),e.setAttribute("aria-hidden","true"),e}createShowAll(){const e=document.createElement("button");return e.setAttribute("type","button"),e.setAttribute("class","show-all txt-link small"),e.setAttribute("aria-expanded","false"),e.innerText=v[0],e.addEventListener("click",()=>{const t=e.getAttribute("aria-expanded")==="true"||!1;this.setShowAllState(!t),this.querySelectorAll(".accordion-title").forEach(o=>o.setAttribute("aria-expanded",String(!t)))}),e}setup(){this.setupButtons(),this.setupPanels();const e=this.createShowAll();this.prepend(e)}}const T=()=>customElements.define("idotai-accordion",x,{extends:"div"}),V=(r,s)=>{const e=r[s];return e?typeof e=="function"?e():Promise.resolve(e):new Promise((t,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+s)))})};class I extends HTMLElement{constructor(){super();d(this,"newCache");d(this,"enableCache",!0)}connectedCallback(){this.setup()}async getIcon(e){var o,i;if(this.enableCache){const n=await((o=this.newCache)==null?void 0:o.match(e));if(n)return n.text()}const t=(await V(Object.assign({"../../public/svg/add.svg":()=>l(()=>import("./add-eec3cdc8.js"),[],import.meta.url),"../../public/svg/arrow-down.svg":()=>l(()=>import("./arrow-down-2dcebbaa.js"),[],import.meta.url),"../../public/svg/arrow-up.svg":()=>l(()=>import("./arrow-up-1c732128.js"),[],import.meta.url),"../../public/svg/calendar.svg":()=>l(()=>import("./calendar-ed60a52a.js"),[],import.meta.url),"../../public/svg/chevron-down.svg":()=>l(()=>import("./chevron-down-8f7e7dad.js"),[],import.meta.url),"../../public/svg/crest.svg":()=>l(()=>import("./crest-88197696.js"),[],import.meta.url),"../../public/svg/cross.svg":()=>l(()=>import("./cross-c16c4190.js"),[],import.meta.url),"../../public/svg/error.svg":()=>l(()=>import("./error-d917edc8.js"),[],import.meta.url),"../../public/svg/help.svg":()=>l(()=>import("./help-a0bd72f0.js"),[],import.meta.url),"../../public/svg/logo.svg":()=>l(()=>import("./logo-e381e703.js"),[],import.meta.url),"../../public/svg/menu.svg":()=>l(()=>import("./menu-447d69df.js"),[],import.meta.url),"../../public/svg/new-tab.svg":()=>l(()=>import("./new-tab-5decd4bf.js"),[],import.meta.url),"../../public/svg/pencil.svg":()=>l(()=>import("./pencil-e6d39771.js"),[],import.meta.url),"../../public/svg/search.svg":()=>l(()=>import("./search-168c77df.js"),[],import.meta.url),"../../public/svg/success.svg":()=>l(()=>import("./success-bdc3aeb6.js"),[],import.meta.url),"../../public/svg/tick.svg":()=>l(()=>import("./tick-c63a7590.js"),[],import.meta.url),"../../public/svg/warning.svg":()=>l(()=>import("./warning-f7e30c96.js"),[],import.meta.url)}),`../../public/svg/${e}.svg`)).default;return this.enableCache&&((i=this.newCache)==null||i.put(e,new Response(t,{headers:{"Content-Type":"image/svg+xml"}}))),t}async setup(){this.newCache=await caches.open("new-cache");const e=this.getAttribute("key");e&&(this.innerHTML=await this.getIcon(e))}}const k=()=>{customElements.define("gov-icon",I)};class C extends HTMLDivElement{constructor(){super();d(this,"setHasValue",e=>{const t=e==null?void 0:e.parentNode,{value:o}=e,i="has-value";return o?t==null?void 0:t.classList.add(i):t==null?void 0:t.classList.remove(i)})}connectedCallback(){this.setup()}setup(){const e=this.querySelector("select");this.setHasValue(e),e.addEventListener("change",t=>this.setHasValue(t.target))}}const R=()=>customElements.define("select-field",C,{extends:"div"}),D=()=>{document.querySelectorAll("a.smooth-scroll").forEach(r=>{r.addEventListener("click",s=>{var o;s.preventDefault();const e=(o=s.target)==null?void 0:o.getAttribute("href"),t=e&&document.querySelector(e);t&&(t.classList.remove("scrolled"),t.classList.add("scrolling"),L(t,!0,16,()=>{t.classList.remove("scrolling"),t.classList.add("scrolled")}))})})},g=r=>{var s,e;r?(s=document.querySelector("body"))==null||s.classList.add("darken"):(e=document.querySelector("body"))==null||e.classList.remove("darken"),document.getElementById("main-header-mobile-menu").setAttribute("aria-expanded",(!!r).toString())},O=()=>g(!1),P=()=>{var r;(r=document.getElementById("main-header-mobile-menu"))==null||r.addEventListener("click",s=>g(s.currentTarget.getAttribute("aria-expanded")!=="true"))};class M extends HTMLElement{constructor(){super()}connectedCallback(){this.setAttribute("hidden","true"),setTimeout(()=>this.setup())}setup(){const s=crypto.randomUUID(),e=`content_${s}`,t=`button_${s}`,o=this.querySelector(".content");if(!o)return;const i=document.createElement("button");i.setAttribute("id",t),i.classList.add("txt-link"),i.setAttribute("type","button"),i.setAttribute("aria-expanded",this.dataset.open||"false"),i.setAttribute("aria-controls",e),i.innerHTML='<gov-icon key="help"></gov-icon>'+(this.getAttribute("aria-label")||"Hint"),i.addEventListener("click",()=>{const u=i.getAttribute("aria-expanded")==="true";i.setAttribute("aria-expanded",String(!u))}),this.prepend(i);const n=document.createElement("div"),c=o.parentNode;n.classList.add("content-wrapper"),n.setAttribute("id",e),n.setAttribute("aria-labelledby",t),n.setAttribute("role","region"),c==null||c.insertBefore(n,o),n.appendChild(o),this.removeAttribute("hidden")}}const q=()=>customElements.define("hint-box",M);class H extends HTMLDivElement{constructor(){super();d(this,"multiValues",[])}connectedCallback(){setTimeout(()=>this.setup())}createTag(e){const t=document.createElement("div");t.classList.add("chip"),t.innerHTML=e.text;const o=document.createElement("gov-icon");return o.classList.add("close"),o.setAttribute("key","cross"),o.setAttribute("role","button"),o.addEventListener("click",()=>this.multiRemove(e),!0),t.appendChild(o),t}createMuliSelect(){const e=document.createElement("selectmenu"),t=this.querySelector("select");Array.from((t==null?void 0:t.attributes)||[]).forEach(c=>{e.setAttribute(c.nodeName==="id"?"data-id":c.nodeName,(c==null?void 0:c.nodeValue)||"")});const o=(t==null?void 0:t.querySelectorAll("option"))||[],i=document.createElement("div");i.setAttribute("slot","button"),i.setAttribute("behavior","button"),e.prepend(i),o.forEach(c=>{c.selected&&this.multiAdd({value:c.value,text:c.innerText}),e.appendChild(c.cloneNode(!0))});const n=document.createElement("div");return n.setAttribute("slot","selected-value"),n.setAttribute("behavior","selected-value"),e.appendChild(n),e.addEventListener("click",c=>{var p;const u=(p=c.target)==null?void 0:p.closest("option");if(!u)return;const a={value:u.value,text:u.text};this.multiValues.find(({value:m})=>m===a.value)?this.multiRemove(a):this.multiAdd(a)}),e}multiAdd(e){this.multiValues.push(e),this.multiRefreshSelectedValues(),this.multiRefreshOptions()}multiRemove(e){this.multiValues=this.multiValues.filter(({value:t})=>t!==e.value),this.multiRefreshSelectedValues(),this.multiRefreshOptions()}multiRefreshSelectedValues(){const e=this.querySelector(".selected-values");e&&(e.innerHTML="",this.multiValues.forEach(t=>e.appendChild(this.createTag(t))))}multiRefreshOptions(){var i;const e=this.querySelector("selectmenu"),t=e&&e.querySelectorAll("option")||[],o=((i=this.querySelector("select"))==null?void 0:i.querySelectorAll("option"))||[];t.forEach((n,c)=>{this.multiValues.find(({value:u})=>u===n.value)?(n.setAttribute("selected",""),o[c].setAttribute("selected","")):(n.removeAttribute("selected"),o[c].removeAttribute("selected"))})}setup(){var t;const e=document.createElement("div");e.classList.add("selected-values"),(t=this.querySelector("select"))==null||t.setAttribute("hidden",""),this.prepend(this.createMuliSelect()),this.prepend(e),this.multiRefreshSelectedValues(),this.multiRefreshOptions()}}const B=()=>customElements.define("multi-select",H,{extends:"div"});function $(r){return Array.isArray(r)?r.every(s=>typeof s=="object"&&typeof s.color=="string"&&typeof s.percentage=="number"&&s.percentage>=0&&s.percentage<=100):!1}function N(r,s){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 100 100"),e.classList.add("progress-bar");const t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.setAttribute("cx","50"),t.setAttribute("cy","50"),t.setAttribute("r","40"),t.classList.add("progress-bar-background"),e.appendChild(t);const o=s.reduce((c,u)=>c+u.percentage,0);let i=0;s.forEach(c=>{let u=-90-o/2*1.5-60;const a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("cx","50"),a.setAttribute("cy","50"),a.setAttribute("r","40"),a.classList.add("progress-bar-foreground"),a.style.stroke=c.color,a.style.strokeDasharray="0",a.style.strokeDashoffset="0",a.style.transformOrigin="50% 50%",a.style.transform=`rotate(${i*360/100+u}deg)`,e.appendChild(a);const p=a.getAttribute("r");if(typeof p=="string"){const m=parseFloat(p),h=2*Math.PI*m,A=h*(1-c.percentage/100);a.style.strokeDasharray=`${h} ${h}`,a.style.strokeDashoffset=A.toString()}else console.error("Failed to retrieve the radius attribute from the progressCircle element");i+=c.percentage});const n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("x","50"),n.setAttribute("y","11"),n.setAttribute("width","2"),n.setAttribute("height","25"),n.style.fill="var(--color-purple)",n.style.transformOrigin="50% 50%",n.style.transform="rotate(160deg) translateY(-14%)",e.appendChild(n),r.appendChild(e)}const F=()=>{document.querySelectorAll(".circular-progress-bar").forEach(s=>{try{const e=JSON.parse(s.getAttribute("data-segments")||"null");$(e)?N(s,e):console.error("Invalid data-segments attribute:",s.getAttribute("data-segments"))}catch(e){e instanceof Error?console.error("Failed to parse data-segments:",e.message):console.error("Failed to parse data-segments:",e)}})},b=()=>globalThis.devMode&&globalThis.devMode&&!0;(function(){b()||(k(),q(),R(),B(),T())})();window.addEventListener("load",()=>{b()||(E(),w(),y(),D(),P(),F(),S())});window.addEventListener("DOMContentLoaded",()=>{const r=window.matchMedia("(min-width: 800px)"),s=()=>{r.matches&&O()};r.addEventListener("change",s)});const Y={parameters:{actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},backgrounds:{default:"White",values:[{name:"light grey",value:"#E3E8EE"},{name:"White",value:"#fff"}]}}};export{Y as default};
//# sourceMappingURL=preview-182ffc06.js.map
